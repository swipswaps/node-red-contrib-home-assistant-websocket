<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Using Date and Time entities to trigger flows | node-red-contrib-home-assistant-websocket</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/node-red-contrib-home-assistant-websocket/favicon.ico">
    <meta name="description" content="Node-RED integration with Home Assistant through the WebSocket and HTTP API">
    <link rel="preload" href="/node-red-contrib-home-assistant-websocket/assets/css/0.styles.727ce928.css" as="style"><link rel="preload" href="/node-red-contrib-home-assistant-websocket/assets/js/app.66e2f381.js" as="script"><link rel="preload" href="/node-red-contrib-home-assistant-websocket/assets/js/2.28f34e5b.js" as="script"><link rel="preload" href="/node-red-contrib-home-assistant-websocket/assets/js/11.da21fe9d.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/10.5f145928.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/12.53ced418.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/13.ae367907.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/14.712f00c1.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/15.de890c0d.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/16.cdeda3bf.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/17.1fd11dd1.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/18.c48f9528.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/19.8edb7260.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/20.87b506d8.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/21.d8f8036b.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/22.58bdd2eb.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/23.d40ae576.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/24.47e79a3d.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/25.470ba6cb.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/26.da45eb1a.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/27.4778218e.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/28.8d0c608a.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/29.95776a15.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/3.b440d186.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/30.d080dda4.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/31.5bfb079d.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/32.8b02b9c7.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/33.6d2b28f9.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/34.13b2ba77.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/35.0bfa3d5e.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/36.05c7124a.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/37.3fcbc448.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/38.285173b4.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/39.dfe17b75.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/4.45012263.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/40.ff62a5d6.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/41.05f74bac.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/42.5f5b2ada.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/43.85a45161.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/44.99eec420.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/45.3bdcb715.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/46.d998406c.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/5.f1a3a738.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/6.1c30f1cf.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/7.94ce7617.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/8.fecf970d.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/9.e0af3283.js">
    <link rel="stylesheet" href="/node-red-contrib-home-assistant-websocket/assets/css/0.styles.727ce928.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/node-red-contrib-home-assistant-websocket/" class="home-link router-link-active"><!----> <span class="site-name">node-red-contrib-home-assistant-websocket</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/guide/" class="nav-link">
  Guides
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/node/" class="nav-link">
  Nodes
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/FAQ.html" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/cookbook/" class="nav-link router-link-active">
  Cookbook
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/scrubber/" class="nav-link">
  Scrubber
</a></div> <a href="https://github.com/zachowj/node-red-contrib-home-assistant-websocket" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/guide/" class="nav-link">
  Guides
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/node/" class="nav-link">
  Nodes
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/FAQ.html" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/cookbook/" class="nav-link router-link-active">
  Cookbook
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/scrubber/" class="nav-link">
  Scrubber
</a></div> <a href="https://github.com/zachowj/node-red-contrib-home-assistant-websocket" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Cookbook</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/node-red-contrib-home-assistant-websocket/cookbook/get-entities.html" class="sidebar-link">Get Entities Examples</a></li><li><a href="/node-red-contrib-home-assistant-websocket/cookbook/jsonata.html" class="sidebar-link">JSONata Examples</a></li><li><a href="/node-red-contrib-home-assistant-websocket/cookbook/motion-triggered-light.html" class="sidebar-link">Motion Triggered Light</a></li><li><a href="/node-red-contrib-home-assistant-websocket/cookbook/saving-and-restoring-states.html" class="sidebar-link">Saving and Restoring States</a></li><li><a href="/node-red-contrib-home-assistant-websocket/cookbook/get-state_changed-events-based-on-area.html" class="sidebar-link">Get state_changed Events Based on Area</a></li><li><a href="/node-red-contrib-home-assistant-websocket/cookbook/sun-events.html" class="sidebar-link">Turn Light On/Off with Sunset/Sunrise</a></li><li><a href="/node-red-contrib-home-assistant-websocket/cookbook/vacation-mode.html" class="sidebar-link">Vacation Mode</a></li><li><a href="/node-red-contrib-home-assistant-websocket/cookbook/expiration-date-monitor.html" class="sidebar-link">Expiration Date Monitor with notification</a></li><li><a href="/node-red-contrib-home-assistant-websocket/cookbook/using-date-and-time-entities-to-trigger-flows.html" aria-current="page" class="active sidebar-link">Using Date and Time entities to trigger flows</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/cookbook/using-date-and-time-entities-to-trigger-flows.html#home-assistant-companion-app-next-alarm-sensor" class="sidebar-link">Home Assistant Companion app next alarm sensor</a></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/cookbook/using-date-and-time-entities-to-trigger-flows.html#daily-alarm-using-datetime-entity" class="sidebar-link">Daily alarm using Datetime Entity</a></li></ul></li><li><a href="/node-red-contrib-home-assistant-websocket/cookbook/check-if-an-entity-was-turned-on-in-the-last-24-hours.html" class="sidebar-link">Check if an entity was a certain state in the last 24 hours</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="using-date-and-time-entities-to-trigger-flows"><a href="#using-date-and-time-entities-to-trigger-flows" class="header-anchor">#</a> Using Date and Time entities to trigger flows</h1> <h2 id="home-assistant-companion-app-next-alarm-sensor"><a href="#home-assistant-companion-app-next-alarm-sensor" class="header-anchor">#</a> Home Assistant Companion app next alarm sensor</h2> <p>Here's a basic example of using the Home Assistant Companion app next alarm sensor.</p> <p><img src="data:image/png;base64,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" alt="screenshot"></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;71576a68.4c7494&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;server-state-changed&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;56b1c979.b2c618&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Next Alarm&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;version&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;exposeToHomeAssistant&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;haConfig&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;property&quot;</span><span class="token operator">:</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;property&quot;</span><span class="token operator">:</span><span class="token string">&quot;icon&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;entityidfilter&quot;</span><span class="token operator">:</span><span class="token string">&quot;sensor.pixel_next_alarm&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;entityidfiltertype&quot;</span><span class="token operator">:</span><span class="token string">&quot;exact&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;outputinitially&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;state_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;haltifstate&quot;</span><span class="token operator">:</span><span class="token string">&quot;unavailable&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if_compare&quot;</span><span class="token operator">:</span><span class="token string">&quot;is_not&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;outputs&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token property">&quot;output_only_on_state_change&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">236</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">1456</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;17ff4332.e9872d&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;ffa8ad2e.133d4&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;ffa8ad2e.133d4&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;change&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;56b1c979.b2c618&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;reset&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;rules&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;t&quot;</span><span class="token operator">:</span><span class="token string">&quot;set&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;p&quot;</span><span class="token operator">:</span><span class="token string">&quot;reset&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;pt&quot;</span><span class="token operator">:</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;to&quot;</span><span class="token operator">:</span><span class="token string">&quot;true&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;tot&quot;</span><span class="token operator">:</span><span class="token string">&quot;bool&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;action&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;property&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;from&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;to&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;reg&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">386</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">1504</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;664bcf1c.d25e8&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;17ff4332.e9872d&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;function&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;56b1c979.b2c618&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;time difference&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;func&quot;</span><span class="token operator">:</span><span class="token string">&quot;const now = Date.now();\nconst alarm = new Date(msg.payload);\n\nconst timeDifference = alarm - now;\n\nmsg.delay = timeDifference;\n\n// Reset the delay node before setting the new delay\nreturn [[{reset: true},msg]];&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;outputs&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;noerr&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">&quot;initialize&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;finalize&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">416</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">1456</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;664bcf1c.d25e8&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;664bcf1c.d25e8&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;delay&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;56b1c979.b2c618&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;wait until time&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;pauseType&quot;</span><span class="token operator">:</span><span class="token string">&quot;delayv&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;timeout&quot;</span><span class="token operator">:</span><span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;timeoutUnits&quot;</span><span class="token operator">:</span><span class="token string">&quot;seconds&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;rate&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;nbRateUnits&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;rateUnits&quot;</span><span class="token operator">:</span><span class="token string">&quot;second&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;randomFirst&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;randomLast&quot;</span><span class="token operator">:</span><span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;randomUnits&quot;</span><span class="token operator">:</span><span class="token string">&quot;seconds&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;drop&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">608</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">1456</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;42742068.3eb4f&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;42742068.3eb4f&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;debug&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;56b1c979.b2c618&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;do stuff&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;active&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;tosidebar&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;console&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;tostatus&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;complete&quot;</span><span class="token operator">:</span><span class="token string">&quot;payload&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;targetType&quot;</span><span class="token operator">:</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;statusVal&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;statusType&quot;</span><span class="token operator">:</span><span class="token string">&quot;auto&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">780</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">1456</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="adding-an-offset-and-on-off-switch"><a href="#adding-an-offset-and-on-off-switch" class="header-anchor">#</a> Adding an offset and on/off switch</h3> <p>Using the Helpers section under Configuration in Home Assistant add an <code>input_boolean</code> and <code>input_number</code> with a min of <code>-90</code> and a max of <code>90</code>.</p> <p>In this example they are <code>input_number.offset</code> and <code>input_boolean.next_alarm_enabled</code>. The offset will be plus or minus minutes to the alarm. The delay node will get updated when either the alarm sensor gets updated, the input boolean gets toggled, or the offset changes.</p> <p>If the <a href="https://github.com/zachowj/hass-node-red" target="_blank" rel="noopener noreferrer">Node-RED custom component<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is installed in Home Assistant there is no need for the <code>input_boolean</code> as the event state node can be exposed to Home Assistant as the toggle switch.</p> <p><img src="/node-red-contrib-home-assistant-websocket/assets/img/using-date-and-time-entities-to-trigger-flows_02.2f3a6bc7.png" alt="screenshot"></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;8a005b30.a70028&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;change&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;56b1c979.b2c618&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;reset&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;rules&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;t&quot;</span><span class="token operator">:</span><span class="token string">&quot;set&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;p&quot;</span><span class="token operator">:</span><span class="token string">&quot;reset&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;pt&quot;</span><span class="token operator">:</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;to&quot;</span><span class="token operator">:</span><span class="token string">&quot;true&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;tot&quot;</span><span class="token operator">:</span><span class="token string">&quot;bool&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;action&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;property&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;from&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;to&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;reg&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">450</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">1616</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;7443b388.3997bc&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;7443b388.3997bc&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;delay&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;56b1c979.b2c618&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;wait until time&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;pauseType&quot;</span><span class="token operator">:</span><span class="token string">&quot;delayv&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;timeout&quot;</span><span class="token operator">:</span><span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;timeoutUnits&quot;</span><span class="token operator">:</span><span class="token string">&quot;seconds&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;rate&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;nbRateUnits&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;rateUnits&quot;</span><span class="token operator">:</span><span class="token string">&quot;second&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;randomFirst&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;randomLast&quot;</span><span class="token operator">:</span><span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;randomUnits&quot;</span><span class="token operator">:</span><span class="token string">&quot;seconds&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;drop&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">1008</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">1568</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;944beed4.7ca6c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;944beed4.7ca6c&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;debug&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;56b1c979.b2c618&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;do stuff&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;active&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;tosidebar&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;console&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;tostatus&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;complete&quot;</span><span class="token operator">:</span><span class="token string">&quot;payload&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;targetType&quot;</span><span class="token operator">:</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;statusVal&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;statusType&quot;</span><span class="token operator">:</span><span class="token string">&quot;auto&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">1180</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">1568</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;902c18e0.b83f08&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;api-current-state&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;56b1c979.b2c618&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;enabled?&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;version&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;outputs&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if&quot;</span><span class="token operator">:</span><span class="token string">&quot;on&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if_compare&quot;</span><span class="token operator">:</span><span class="token string">&quot;is&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;override_topic&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;entity_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;input_boolean.next_alarm_enabled&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;state_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;state_location&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;override_payload&quot;</span><span class="token operator">:</span><span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;entity_location&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;override_data&quot;</span><span class="token operator">:</span><span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;blockInputOverrides&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">1568</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;819e7961.c0c5b8&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;8a005b30.a70028&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;88557318.dcb9&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;function&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;56b1c979.b2c618&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;add offset&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;func&quot;</span><span class="token operator">:</span><span class="token string">&quot;const now = Date.now();\nconst alarm = new Date(msg.alarm);\nconst offset = msg.offset * 60000;\nconst timeDifference = alarm.getTime() + offset;\nconst delay = timeDifference - now;\n\nif(delay &lt; 0) {\n    node.status({fill: 'red', text: 'Alarm in the past'});\n    node.error(\&quot;Alarm in the past.\&quot;);\n    return {reset: true};\n}\n\nnode.status({});\nmsg.delay = delay\n\n// Reset the delay node before setting the new delay\nreturn [[{reset: true},msg]];&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;outputs&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;noerr&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">&quot;initialize&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;finalize&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">828</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">1568</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;7443b388.3997bc&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;5f5d428e.e8ed8c&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;api-current-state&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;56b1c979.b2c618&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;get offset&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;version&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;outputs&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if_compare&quot;</span><span class="token operator">:</span><span class="token string">&quot;is&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;override_topic&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;entity_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;input_number.offset&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;state_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;state_location&quot;</span><span class="token operator">:</span><span class="token string">&quot;offset&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;override_payload&quot;</span><span class="token operator">:</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;entity_location&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;override_data&quot;</span><span class="token operator">:</span><span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;blockInputOverrides&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">684</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">1568</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;88557318.dcb9&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;6e621173.6634d&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;server-state-changed&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;56b1c979.b2c618&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Update Alarm&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;version&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;exposeToHomeAssistant&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;haConfig&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;property&quot;</span><span class="token operator">:</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;property&quot;</span><span class="token operator">:</span><span class="token string">&quot;icon&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;entityidfilter&quot;</span><span class="token operator">:</span><span class="token string">&quot;input_number.offset, input_boolean.next_alarm_enabled, sensor.pixel_next_alarm&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;entityidfiltertype&quot;</span><span class="token operator">:</span><span class="token string">&quot;substring&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;outputinitially&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;state_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;haltifstate&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if_compare&quot;</span><span class="token operator">:</span><span class="token string">&quot;is&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;outputs&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;output_only_on_state_change&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">1568</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;902c18e0.b83f08&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;819e7961.c0c5b8&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;api-current-state&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;56b1c979.b2c618&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;get alarm time&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;version&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;outputs&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if&quot;</span><span class="token operator">:</span><span class="token string">&quot;unavailable&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if_compare&quot;</span><span class="token operator">:</span><span class="token string">&quot;is_not&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;override_topic&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;entity_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;sensor.pixel_next_alarm&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;state_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;state_location&quot;</span><span class="token operator">:</span><span class="token string">&quot;alarm&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;override_payload&quot;</span><span class="token operator">:</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;entity_location&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;override_data&quot;</span><span class="token operator">:</span><span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;blockInputOverrides&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">480</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">1568</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;5f5d428e.e8ed8c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;8a005b30.a70028&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Delay nodes can have a max timeout of around 24.8 days greater than that and weird things will happen.</p></div> <h2 id="daily-alarm-using-datetime-entity"><a href="#daily-alarm-using-datetime-entity" class="header-anchor">#</a> Daily alarm using Datetime Entity</h2> <p><img src="data:image/png;base64,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" alt="screenshot"></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;2672831b.1236ac&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;inject&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;56b1c979.b2c618&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;props&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;p&quot;</span><span class="token operator">:</span><span class="token string">&quot;payload&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;p&quot;</span><span class="token operator">:</span><span class="token string">&quot;topic&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;vt&quot;</span><span class="token operator">:</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;repeat&quot;</span><span class="token operator">:</span><span class="token string">&quot;60&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;crontab&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;once&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;onceDelay&quot;</span><span class="token operator">:</span><span class="token number">0.1</span><span class="token punctuation">,</span><span class="token property">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;payload&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;payloadType&quot;</span><span class="token operator">:</span><span class="token string">&quot;date&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">326</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">1744</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;ef533324.d135d&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;8b6ea5bc.5f2478&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;api-current-state&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;56b1c979.b2c618&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;alarm&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;version&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;outputs&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if_compare&quot;</span><span class="token operator">:</span><span class="token string">&quot;is&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;override_topic&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;entity_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;input_datetime.alarm&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;state_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;state_location&quot;</span><span class="token operator">:</span><span class="token string">&quot;payload&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;override_payload&quot;</span><span class="token operator">:</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;entity_location&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;override_data&quot;</span><span class="token operator">:</span><span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;blockInputOverrides&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">612</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">1744</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;aedf33ed.0ca28&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;d3ec7afe.0c2968&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;debug&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;56b1c979.b2c618&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;do stuff&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;active&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;tosidebar&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;console&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;tostatus&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;complete&quot;</span><span class="token operator">:</span><span class="token string">&quot;payload&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;targetType&quot;</span><span class="token operator">:</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;statusVal&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;statusType&quot;</span><span class="token operator">:</span><span class="token string">&quot;auto&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">894</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">1744</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;aedf33ed.0ca28&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;function&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;56b1c979.b2c618&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;now?&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;func&quot;</span><span class="token operator">:</span><span class="token string">&quot;const now = new Date();\nconst hours = now.getHours();\nconst minutes = now.getMinutes().toString().padStart(2,'0');\nconst time = `${hours}:${minutes}`;\n// Remove seconds\nconst alarm = msg.payload.split(\&quot;:\&quot;).splice(0,2).join(\&quot;:\&quot;);\n\nif(time === alarm) {\n    return msg;\n}&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;outputs&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;noerr&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">&quot;initialize&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;finalize&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">740</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">1744</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;d3ec7afe.0c2968&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;ef533324.d135d&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;api-current-state&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;56b1c979.b2c618&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;enabled?&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;version&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;outputs&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if&quot;</span><span class="token operator">:</span><span class="token string">&quot;on&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if_compare&quot;</span><span class="token operator">:</span><span class="token string">&quot;is&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;override_topic&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;entity_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;input_boolean.alarm_enabled&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;state_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;state_location&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;override_payload&quot;</span><span class="token operator">:</span><span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;entity_location&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;override_data&quot;</span><span class="token operator">:</span><span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;blockInputOverrides&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">476</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">1744</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;8b6ea5bc.5f2478&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><p>An offset can also be added as shown in the next alarm sensor example.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zachowj/node-red-contrib-home-assistant-websocket/edit/dev/docs/cookbook/using-date-and-time-entities-to-trigger-flows.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/15/2020, 11:45:36 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/node-red-contrib-home-assistant-websocket/cookbook/expiration-date-monitor.html" class="prev">
        Expiration Date Monitor with notification
      </a></span> <span class="next"><a href="/node-red-contrib-home-assistant-websocket/cookbook/check-if-an-entity-was-turned-on-in-the-last-24-hours.html">
        Check if an entity was a certain state in the last 24 hours
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/node-red-contrib-home-assistant-websocket/assets/js/app.66e2f381.js" defer></script><script src="/node-red-contrib-home-assistant-websocket/assets/js/2.28f34e5b.js" defer></script><script src="/node-red-contrib-home-assistant-websocket/assets/js/11.da21fe9d.js" defer></script>
  </body>
</html>
